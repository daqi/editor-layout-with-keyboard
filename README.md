# editor-layout-with-keyboard

实现移动端文档编辑器外壳 UI 布局、虚拟键盘上的工具条

## demo

https://daqi.cool/editor-layout-with-keyboard/

![qrcode](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAAAAACIM/FCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAFxEAABcRAcom8z8AAAMnSURBVHja7Z1BdtwgEERR3pzEWeWEOZh9hSyzdY5DFvICPVStAmbsmnb9lc0Ao++W+wFC0lZLDn589QFYxCLiWEQNi6hhETUsosbt8NtGt6tdqzrVT1loexjvpomIRdSwiBq3k7K3l6DB6++uaM8eTLbhs9PoMZyKvPwKOvk79oeaZfgY0pxaFlHjG4hsHf/COntJrbXW2v7c0tds688dw6XIk2ERNSyixm2pdT/KQrPFCsr73iZJExGLqGERNday1k6bu1Be6j9FrSZJExGLqGERNXDWeu9KfoKaKPPwq1ioB/4YApFoYemzGDiGNKeWRdQ4+x95jdZ3/3zOcQ0fw3ZIFaPX77aH/cwfwwdpTi2LqGERNbalyRlam+KvJ3qGaBF1LKLG1ViLyUJ9nTgjje6RaFvB/JYmIhZRwyJqnE1125yD5nFz8Hks/t6TftJExCJqWEQNvIiNstNG12dKUD8oZ0LSRMQialhEjaudD2i3FVN/br4ZZ0U43ksTEYuoYRE18Go8s5bFtI0zWKE/RatnH6SJiEXUsIgaZ3dPo5kds64Vr8mvr4zB0VqaiFhEDYuoccxa6zO4mEqUtyta/LfniYhF1LCIGvhJNWhVvCduxdRsS0pYB9XMExGLqGERNa5W45l9U/EILa4ZZzmEdz48ARZRI40IN0OMR0T8vTmTd+sQPeeJiEXUsIgaZ3vjV+4ZRFcGmTEbc63Q1xCfBouokUbkbOdDnG2oXrse+F1Yk1ch00TEImpYRA081mpLSlPOjIJK2CouRz1ckCYiFlHDImo85pkP92rLz0bzRMQialhEjXu8oye+G/rirmfQllnvOpAmIhZRwyJq3OMdPTv8vtCVe4WGRBTe0TNMmlPLImqkEcH7tfrc8k48R5jZO4pGUytPk8gTEYuoYRE17veOntEnQpSwbTxC8y7TJ8AiaqQRWctacb7qc9rcPdTUu63TRMQialhEjfu9o2enz059nQI+nZtdXooovKNngDSnlkXUUH1HzzCPeUdPASUFtEI9F9BnX57n1LKIGhZRY22/lhBpImIRNSyihkXUsIgaFlEjjch/BkTi7RhgWcoAAAAASUVORK5CYII=)

## 由来

1. 虚拟键盘上方工具条的需求
2. iOS 弹出虚拟键盘时不会改变 `window` 大小
3. iOS 很难动态获取键盘高度
4. iOS 虚拟键盘弹出时 `position: fixed` 的怪异表现

## 实现

- 使用 `visualViewport` 获取 iOS 的虚拟键盘弹出时窗口的高度，从而获取键盘高度
- 使用 `better-scroll` 阻止 window 滚动，防止 iOS 在弹出虚拟键盘时 `window` 出现滚动条，同时提供主体滚动的能力
- 提供阻止 `blur` 但触发 `click` 的组件
- 提供阻止 `mousemove` 的组件，防止 `window` 出现滚动条

## 感谢

- 金山文档表格给与的灵感
